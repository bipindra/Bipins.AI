@{
    ViewData["Title"] = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-12">
        <h1 class="mb-4">
            <i class="bi bi-cloud-check"></i> AI Cloud Cost Optimization Advisor
        </h1>
        <p class="lead">Analyze your Terraform infrastructure and get AI-powered cost optimization suggestions for AWS, Azure, and GCP.</p>
    </div>
</div>

<div class="row mt-4">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-file-code"></i> Terraform Input</h5>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs" id="inputTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="file-tab" data-bs-toggle="tab" data-bs-target="#file" type="button">
                            <i class="bi bi-upload"></i> Upload File
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="text-tab" data-bs-toggle="tab" data-bs-target="#text" type="button">
                            <i class="bi bi-file-text"></i> Paste Text
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="url-tab" data-bs-toggle="tab" data-bs-target="#url" type="button">
                            <i class="bi bi-link-45deg"></i> From URL
                        </button>
                    </li>
                </ul>
                <div class="tab-content mt-3" id="inputTabsContent">
                    <div class="tab-pane fade show active" id="file" role="tabpanel">
                        <div class="mb-3">
                            <label for="terraformFile" class="form-label">Select Terraform file (.tf)</label>
                            <input type="file" class="form-control" id="terraformFile" accept=".tf,.tfvars">
                            <div class="form-text">Upload a Terraform configuration file</div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="text" role="tabpanel">
                        <div class="mb-3">
                            <label for="terraformText" class="form-label">Paste Terraform code</label>
                            <textarea class="form-control font-monospace" id="terraformText" rows="15" placeholder="resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t3.micro&quot;
  
  tags = {
    Name = &quot;ExampleInstance&quot;
  }
}"></textarea>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="url" role="tabpanel">
                        <div class="mb-3">
                            <label for="terraformUrl" class="form-label">Terraform file URL</label>
                            <input type="url" class="form-control" id="terraformUrl" placeholder="https://example.com/main.tf">
                            <div class="form-text">Enter a URL to a Terraform configuration file</div>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Cloud Providers to Analyze</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="aws" id="providerAWS" checked>
                        <label class="form-check-label" for="providerAWS">AWS</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="azurerm" id="providerAzure" checked>
                        <label class="form-check-label" for="providerAzure">Azure</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="google" id="providerGCP" checked>
                        <label class="form-check-label" for="providerGCP">GCP</label>
                    </div>
                </div>

                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeOptimizations" checked>
                        <label class="form-check-label" for="includeOptimizations">
                            Include AI-powered optimization suggestions
                        </label>
                    </div>
                </div>

                <button type="button" class="btn btn-primary btn-lg w-100" id="analyzeBtn">
                    <i class="bi bi-calculator"></i> Analyze Costs
                </button>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-info-circle"></i> How It Works</h5>
            </div>
            <div class="card-body">
                <ol>
                    <li>Upload, paste, or provide a URL to your Terraform script</li>
                    <li>Select which cloud providers to analyze (AWS, Azure, GCP)</li>
                    <li>Click "Analyze Costs" to calculate estimated costs</li>
                    <li>Get AI-powered optimization suggestions</li>
                </ol>
                <div class="alert alert-info mt-3">
                    <strong>Note:</strong> Cost estimates are based on standard pricing and may vary. 
                    Actual costs depend on usage patterns, discounts, and regional pricing.
                </div>
            </div>
        </div>
    </div>
</div>

<div id="loadingIndicator" class="d-none mt-4">
    <div class="text-center">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">Analyzing Terraform infrastructure...</p>
    </div>
</div>

<div id="errorAlert" class="alert alert-danger d-none mt-4" role="alert">
    <i class="bi bi-exclamation-triangle"></i> <span id="errorMessage"></span>
</div>

<div id="resultsContainer" class="mt-4 d-none">
    <!-- Results will be loaded here via JavaScript -->
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            terraformApp.init();
        });
    </script>
}
